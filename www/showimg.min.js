/*!  CyTube Enhancements: Show Images in Chat
**|  Version: 2024.09.21
**@preserve
*/ "use strict";var zoomImgMsg=jQuery("#messagebuffer"),zoomImgCSS=`<style id="zoomImgCSS" type="text/css">
.zoomImg {
  cursor: zoom-in;
  transition: 0.3s;
  max-height: 72px;
  max-width: 160px;
}
.zoomImg:hover {opacity: 0.85;}

.zoomImgModal {
  display: none;
  cursor: zoom-out;
  position: fixed;
  z-index: 10000;
  padding-top: 10px;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: black;
  background-color: rgba(0,0,0,0.6);
}
.zoomedImg {
  margin: auto;
  display: block;
  max-width: 100%;
  max-height: 100%;
  -webkit-animation-name: zoom;
  -webkit-animation-duration: 0.2s;
  animation-name: zoom;
  animation-duration: 0.2s;
}

@-webkit-keyframes zoom {
  from {-webkit-transform:scale(0)} 
  to {-webkit-transform:scale(1)}
}
@keyframes zoom {
  from {transform:scale(0)} 
  to {transform:scale(1)}
}

/* 100% Image Width on Smaller Screens */
@media only screen and (max-width: 700px){
  .zoomedImg {
    width: 100%;
  }
}
</style>
`;jQuery("head").append(zoomImgCSS),jQuery("footer").after('<div id="zoomImgModal" class="zoomImgModal"></div>');var zoomImgModal=jQuery("#zoomImgModal");window.zoomImgError=function(o){return o.onerror="",window.console.error("imgError: "+o.src),o.src=CBE.Root_URL+"emoji/x.webp",!0},window.zoomImgWait=function(o){return new Promise((e,a)=>{let r=new Image;r.onload=()=>e(r),r.onerror=()=>a(r),r.src=o})};const zoomImgExtensions='a[href*=".jpg"], a[href*=".jpeg"], a[href*=".png"], a[href*=".pnj"], a[href*=".gif"], a[href*=".gifv"], a[href*=".svg"], a[href*=".svgz"], a[href*=".webp"]';window.zoomImgChat=function(){!(800>=jQuery(window).width())&&zoomImgMsg.find('a[href*=".jpg"], a[href*=".jpeg"], a[href*=".png"], a[href*=".pnj"], a[href*=".gif"], a[href*=".gifv"], a[href*=".svg"], a[href*=".svgz"], a[href*=".webp"]').each(function(){window.zoomImgWait(this.href).then(o=>{let e=jQuery("<img>",{class:"zoomImg",rel:"noopener noreferrer",title:"Click to Zoom",alt:"Bad Image"}).attr("src",encodeURI(this.href)).on("error",'window.zoomImgError(this)"').on("click",function(){let o=jQuery("<img>",{class:"zoomedImg",title:"Click to Close",src:encodeURI(jQuery(this).attr("src"))});zoomImgModal.html("").append(o).on("click",function(){zoomImgModal.css({display:"none"}).html("")}),zoomImgModal.css({display:"block"})}).load(()=>{scrollChat()});jQuery(this).parent().html(e)})})},jQuery(document).ready(function(){window.socket.on("chatMsg",o=>{null!=o&&void 0!==o.msg&&null!==o.msg&&o.msg.includes("https")&&window.zoomImgChat()}),window.zoomImgChat()});